<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
    <NoWarn>CA1303;CA2000;EXHAUSTION001</NoWarn>
    <NucliaBaseUrl Condition="'$(NucliaBaseUrl)' == ''">http://localhost:8080/api/v1</NucliaBaseUrl>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\RestClient.Net\RestClient.Net.csproj" />
    <ProjectReference Include="..\..\RestClient.Net.OpenApiGenerator.Cli\RestClient.Net.OpenApiGenerator.Cli.csproj" ReferenceOutputAssembly="false" />
    <PackageReference Include="Microsoft.Extensions.Http" Version="9.0.0" />
    <PackageReference Include="Urls" Version="1.0.0" />
  </ItemGroup>
  <Target Name="GenerateOpenApiCode" BeforeTargets="CoreCompile" DependsOnTargets="ResolveProjectReferences">
    <Exec Command="dotnet $(MSBuildThisFileDirectory)../../RestClient.Net.OpenApiGenerator.Cli/bin/$(Configuration)/net9.0/RestClient.Net.OpenApiGenerator.Cli.dll -u $(MSBuildThisFileDirectory)api.yaml -o $(MSBuildThisFileDirectory)Generated -n NucliaDB.Generated -c NucliaDBApiExtensions -v 3.0.2 -b $(NucliaBaseUrl)" />
  </Target>
</Project>
