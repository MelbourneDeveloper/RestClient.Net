<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>library</OutputType>
    <TargetFramework>net9.0</TargetFramework>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\RestClient.Net\RestClient.Net.csproj" />
    <ProjectReference Include="..\..\RestClient.Net.OpenApiGenerator.Cli\RestClient.Net.OpenApiGenerator.Cli.csproj" ReferenceOutputAssembly="false" />
    <PackageReference Include="Microsoft.Extensions.Http" Version="9.0.0" />
    <PackageReference Include="Urls" Version="1.0.0" />
  </ItemGroup>
  <Target Name="GenerateOpenApiCode" BeforeTargets="CoreCompile" DependsOnTargets="ResolveProjectReferences">
    <Exec Command="dotnet $(MSBuildThisFileDirectory)../../RestClient.Net.OpenApiGenerator.Cli/bin/$(Configuration)/net9.0/RestClient.Net.OpenApiGenerator.Cli.dll -u $(MSBuildThisFileDirectory)../RestClient.OpenApiGenerator.Sample/jsonplaceholder-openapi.json -o $(MSBuildThisFileDirectory)Generated -n JSONPlaceholder.Generated -c JSONPlaceholderApiExtensions -b https://jsonplaceholder.typicode.com" />
  </Target>
</Project>
